<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>React Demo10</title>
  <script src="./build/react.js"></script>
  <script src="./build/react-dom.js"></script>
  <script src="./build/browser.min.js"></script>
</head>
<body>
  <div id="main"></div>
  <script type="text/babel">
    // 组件的生命周期分成三个状态：
    // Mounting：已插入真实 DOM
    // Updating：正在被重新渲染
    // Unmounting：已移出真实 DOM

    // React 为每个状态都提供了两种处理函数，will 函数在进入状态之前调用，did 函数在进入状态之后调用，三种状态共计五种处理函数。
    // componentWillMount()
    // componentDidMount()
    // componentWillUpdate(object nextProps, object nextState)
    // componentDidUpdate(object prevProps, object prevState)
    // componentWillUnmount()

    // 此外，React 还提供两种特殊状态的处理函数。
    // componentWillReceiveProps(object nextProps)：已加载组件收到新的参数时调用
    // shouldComponentUpdate(object nextProps, object nextState)：组件判断是否重新渲染时调用
    // https://facebook.github.io/react/docs/react-component.html

    // 组件的style属性的设置方式也值得注意，React 组件样式是一个对象，所以第一重大括号表示这是 JavaScript 语法，第二重大括号表示样式对象。
    var MyHello = React.createClass({
      getInitialState: function(){
        return { opacity: 1}
      },
      componentDidMount: function() {
        this.timer = setInterval(function(){
          var opacity = this.state.opacity;
          opacity -= 0.1;
          if(opacity < 0.3){
            opacity = 1;
          }
          this.setState({
            opacity: opacity
          })
        }.bind(this),3000)
      },
      render: function(){
        return (
          <div style={{opacity: this.state.opacity}}> 
            Hello {this.props.name} !
          </div>
        )
      }
    });
    ReactDOM.render(
      <MyHello name='DayangLee' />,
      document.getElementById('main')
    )
  </script>
</body>
</html>